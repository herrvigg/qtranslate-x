(()=>{"use strict";var e,t,n=function(e,t,n,a){var i=document.createElement(e);if(t)for(var o in t)i[o]=t[o];return n&&(a&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i},a=window.qTranslateConfig,i=function(e){var t="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,a.lang_code_format),n=new RegExp(t,"gi");if(3==="a~b".split(/(~)/).length)return e.split(n);for(var i,o=0,s=[];null!=(i=n.exec(e));)s.push(e.slice(o,i.index)),i.length>1&&s.push(i[1]),o=n.lastIndex;return o<e.length&&s.push(e.slice(o)),o===e.length&&s.push(""),s},o=function(e){var t=i(e);return s(t)},s=function(e){var t=new Object;for(var n in a.language_config)t[n]="";if(!e||!e.length)return t;if(1===e.length){var i=e[0];for(var n in a.language_config)t[n]+=i;return t}for(var o,s=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,a.lang_code_format),"gi"),r=new RegExp("\\[:(lang)]".replace(/lang/g,a.lang_code_format),"gi"),l=new RegExp("{:(lang)}".replace(/lang/g,a.lang_code_format),"gi"),c=(n=!1,0);c<e.length;++c)if((i=e[c]).length)if(o=s.exec(i),s.lastIndex=0,null==o)if(o=r.exec(i),r.lastIndex=0,null==o)if(o=l.exec(i),l.lastIndex=0,null==o)if("\x3c!--:--\x3e"!==i&&"[:]"!==i&&"{:}"!==i)if(n)t[n]?t[n]+=i:t[n]=i,n=!1;else for(var d in t)t[d]+=i;else n=!1;else n=o[1];else n=o[1];else n=o[1];return t},r="qtranslate-xt-admin-edit-language",l=function(e){try{sessionStorage.setItem(r,e)}catch(e){console.log('Failed to store "'+r+'" with sessionStorage',e)}},c=window.qTranslateConfig;e=jQuery,t=function(t){var a=this;this.getLanguages=function(){return c.language_config},this.getFlagLocation=function(){return c.flag_location},this.isLanguageEnabled=function(e){return!!c.language_config[e]},c.LSB?(c.activeLanguage=void sessionStorage.getItem(r),c.activeLanguage&&this.isLanguageEnabled(c.activeLanguage)||(c.activeLanguage=c.language,this.isLanguageEnabled(c.activeLanguage)?l(c.activeLanguage):c.LSB=!1)):(c.activeLanguage=c.language,l(c.activeLanguage)),this.getActiveLanguage=function(){return c.activeLanguage};var d={};this.hasContentHook=function(e){return d[e]},this.addContentHook=function(t,i,s){if(!t)return!1;switch(t.tagName){case"TEXTAREA":break;case"INPUT":switch(t.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!s){if(!t.name)return!1;s=t.name}if(t.id){if(d[t.id]){if(e.contains(document,t))return d[t.id];a.removeContentHook(t)}}else if(d[s]){var r=0;do{++r,t.id=s+r}while(d[t.id])}else t.id=s;t.className+=" qtranxs-translatable";var l,u=d[t.id]={};if(u.name=s,u.contentField=t,u.lang=c.activeLanguage,i)switch(i){case"slug":l="qtranslate-slugs[";break;case"term":l="qtranslate-terms[";break;default:l="qtranslate-fields["}else i="[",l="qtranslate-fields[";u.encode=i;var g,f,h,v=u.name.indexOf("[");if(v<0)g=l+u.name+"]";else if(g=l+u.name.substring(0,v)+"]",u.name.lastIndexOf("[]")<0)g+=u.name.substring(v);else{var m=u.name.length-2;m>v&&(g+=u.name.substring(v,m)),f="[]"}if(u.fields={},!c.RAW){for(var p in h=o(t.value),t.value=h[u.lang],h){var y=h[p],w=g+"["+p+"]";f&&(w+=f);var b=n("input",{name:w,type:"hidden",className:"hidden",value:y});u.fields[p]=b,t.parentNode.insertBefore(b,t)}var C=e(t).closest("form");C.length?C.find('input[name="qtranslate-edit-language"]').length||n("input",{type:"hidden",name:"qtranslate-edit-language",value:c.activeLanguage},C[0],!0):console.error("No form found for translatable field id=",t.id)}switch(i){case"slug":case"term":c.RAW&&(h=o(t.value)),u.sepfield=n("input",{name:g+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:h[c.default_language]});break;default:c.RAW||(u.sepfield=n("input",{name:g+"[qtranslate-separator]",type:"hidden",className:"hidden",value:i}))}return u.sepfield&&t.parentNode.insertBefore(u.sepfield,t),u},this.addContentHookC=function(e){return a.addContentHook(e,"[")},this.addContentHookB=function(e){return a.addContentHook(e,"[")},this.addContentHookById=function(e,t,n){return a.addContentHook(document.getElementById(e),t,n)},this.addContentHookByIdName=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return a.addContentHookById(e,t)},this.addContentHookByIdC=function(e){return a.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return a.addContentHookById(e,"[")},this.addContentHooks=function(e,t,n){for(var i=0;i<e.length;++i){var o=e[i];a.addContentHook(o,t,n)}},this.addContentHooksByClass=function(e,t){var n;0!==e.indexOf("<")&&0!==e.indexOf("[")||(n=e.substring(0,1),e=e.substring(1)),function(e,t,n){t||(t=document);var i=t.getElementsByClassName(e);a.addContentHooks(i,n)}(e,t,n)},this.addContentHooksByTagInClass=function(e,t,n){for(var i=n.getElementsByClassName(e),o=0;o<i.length;++o){var s=i[o].getElementsByTagName(t);a.addContentHooks(s)}};var u=function(t){if(!t)return!1;t.sepfield&&e(t.sepfield).remove();var n={};for(var a in t.fields){var i=t.fields[a];n[a]=i.value,e(i).remove()}return e(t.contentField).removeClass("qtranxs-translatable"),delete d[t.contentField.id],n};this.removeContentHook=function(t){if(!t||!t.id||!d[t.id])return!1;var n=d[t.id];return u(n),e(t).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e||!e.id)return!1;var t=d[e.id];return t&&u(t),a.addContentHook(e)};var g=function(e){if(e[c.language])return"("+c.language+") "+e[c.language];if(e[c.default_language])return"("+c.default_language+") "+e[c.default_language];for(var t in e)if(e[t])return"("+t+") "+e[t];return""},f=function(e){var t=null;for(var n in e)e[n]||(t||(t=g(e)),e[n]=t)},h=[],v=function(e){if(!e.nodeValue)return 0;var t=i(e.nodeValue);if(!t||!t.length||1===t.length)return 0;var n={};return n.nd=e,n.contents=s(t),f(n.contents),e.nodeValue=n.contents[c.activeLanguage],h.push(n),1},m=[],p=function(e,t){if(!e.hasAttribute(t))return 0;var n=e.getAttribute(t),a=i(n);if(!a||!a.length||1===a.length)return 0;var o={};return o.nd=e,o.attr=t,o.contents=s(a),f(o.contents),e.setAttribute(t,o.contents[c.activeLanguage]),m.push(o),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?p(e,"value"):0}var t=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var i=e.childNodes[n];switch(i.nodeType){case 1:t+=a.addDisplayHook(i);break;case 2:case 3:t+=v(i)}}return t},this.addDisplayHookById=function(e){return a.addDisplayHook(document.getElementById(e))};var y=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})};this.addDisplayHooks=function(e){for(var t=0;t<e.length;++t){var n=e[t];a.addDisplayHook(n)}},this.addDisplayHookAttrs=function(e,t){for(var n=0;n<t.length;++n){var a=t[n];p(e,a)}},this.addDisplayHooksAttrs=function(e,t){for(var n=0;n<e.length;++n){var i=e[n];a.addDisplayHookAttrs(i,t)}},this.addDisplayHooksByClass=function(e,t){var n=t.getElementsByClassName(e);a.addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,t,n){for(var i=n.getElementsByClassName(e),o=0;o<i.length;++o){var s=i[o].getElementsByTagName(t);a.addDisplayHooks(s)}},this.addCustomContentHooks=function(){for(var e=0;e<c.custom_fields.length;++e){var t=c.custom_fields[e];a.addContentHookByIdName(t)}for(e=0;e<c.custom_field_classes.length;++e){var n=c.custom_field_classes[e];a.addContentHooksByClass(n)}c.LSB&&a.addContentHooksTinyMCE()};var w=function(e){var t=e.id;if(t){var n=d[t];if(n&&!n.mce){n.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var a=n.updateTinyMCEonInit;return null==a&&(a=e.getContent({format:"html"}).replace(/\s+/g,"")!==n.contentField.value.replace(/\s+/g,"")),a&&y(n),n}}};this.addContentHooksTinyMCE=function(){if(window.tinyMCEPreInit&&window.tinyMCE)for(var e in d){var t=d[e];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[e]){if(t.mceInit=tinyMCEPreInit.mceInit[e],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var n=tinymce.DOM.select("#wp-"+e+"-wrap");n&&n.length&&(t.wrapper=n[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){w(e)}}}},this.loadAdditionalTinyMceHooks=function(){window.tinyMCE&&tinyMCE.get().forEach((function(e){w(e)}))},c.onTabSwitchFunctions||(c.onTabSwitchFunctions=[]),c.onTabSwitchFunctionsSave||(c.onTabSwitchFunctionsSave=[]),c.onTabSwitchFunctionsLoad||(c.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){c.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){c.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var t=0;t<c.onTabSwitchFunctionsSave.length;++t)if(c.onTabSwitchFunctionsSave[t]===e)return void c.onTabSwitchFunctionsSave.splice(t,1)},this.addLanguageSwitchAfterListener=function(e){c.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var t=0;t<c.onTabSwitchFunctionsLoad.length;++t)if(c.onTabSwitchFunctionsLoad[t]===e)return void c.onTabSwitchFunctionsLoad.splice(t,1)},this.enableLanguageSwitchingButtons=function(e){var t=e?"block":"none";for(var n in c.tabSwitches){for(var a=c.tabSwitches[n],i=0;i<a.length;++i){a[i].parentElement.style.display=t;break}break}};var b=function(){for(var e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t)if((n=e[t].getElementsByTagName("form")).length)return n[0];var n;if(1===(n=document.getElementsByTagName("form")).length)return n[0];for(t=0;t<n.length;++t){var a=n[t];if((e=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof t.addContentHooks&&t.addContentHooks(this),c.page_config&&c.page_config.forms&&function(t){for(var n in t){var i,o=t[n];if(o.form){if(o.form.id)i=document.getElementById(o.form.id);else if(o.form.jquery)i=e(o.form.jquery);else if(o.form.name){var s=document.getElementsByName(o.form.name);s&&s.length&&(i=s[0])}}else i=document.getElementById(n);for(var r in i||(i=b())||(i=document),o.fields){var l=o.fields[r],c=[];l.container_id?(g=document.getElementById(l.container_id))&&c.push(g):l.container_jquery?c=e(l.container_jquery):l.container_class?c=document.getElementsByClassName(l.container_class):c.push(i);var d=l.encode;switch(d){case"none":continue;case"display":if(l.jquery)for(var u=0;u<c.length;++u){var g=c[u],f=e(g).find(l.jquery);l.attrs?a.addDisplayHooksAttrs(f,l.attrs):a.addDisplayHooks(f)}else{var h=l.id?l.id:r,v=document.getElementById(h);l.attrs?a.addDisplayHookAttrs(v,l.attrs):a.addDisplayHook(v)}break;case"[":case"<":case"{":case"byline":default:if(l.jquery)for(u=0;u<c.length;++u)g=c[u],f=e(g).find(l.jquery),a.addContentHooks(f,d,l.name);else h=l.id?l.id:r,a.addContentHookById(h,d,l.name)}}}}(c.page_config.forms),e(".i18n-multilingual").each((function(e,t){a.addContentHook(t,"[")})),e(".i18n-multilingual-curly").each((function(e,t){a.addContentHook(t,"{")})),e(".i18n-multilingual-term").each((function(e,t){a.addContentHook(t,"term")})),e(".i18n-multilingual-slug").each((function(e,t){a.addContentHook(t,"slug")})),e(".i18n-multilingual-display").each((function(e,t){a.addDisplayHook(t)})),!h.length&&!m.length){var C=!1;for(var L in d){C=!0;break}if(!C)return}if(this.onLoadLanguage=function(e,t){for(var n=c.onTabSwitchFunctionsLoad,a=0;a<n.length;++a)n[a].call(c.qtx,e,t)},this.switchActiveLanguage=function(t){if(c.activeLanguage!==t){if(c.activeLanguage){for(var n=!0,i=c.onTabSwitchFunctionsSave,o=0;o<i.length;++o)!1===i[o].call(c.qtx,c.activeLanguage,t)&&(n=!1);if(!n)return;var s=c.tabSwitches[c.activeLanguage];for(o=0;o<s.length;++o)s[o].classList.remove(c.lsb_style_active_class),e(s[o]).find(".button").removeClass("active")}var r=c.activeLanguage;for(c.activeLanguage=t,e('input[name="qtranslate-edit-language"]').val(t),s=c.tabSwitches[c.activeLanguage],o=0;o<s.length;++o)s[o].classList.add(c.lsb_style_active_class),e(s[o]).find(".button").addClass("active");var l=c.onTabSwitchFunctions;for(o=0;o<l.length;++o)l[o].call(c.qtx,t,r);a.onLoadLanguage(t,r)}},this.clickSwitchLanguage=function(){var t=e(this).hasClass("button")?this.parentNode:this,n=t.lang;n?e(".qtranxs-lang-switch-wrap").hasClass("copying")?(a.copyContentFrom(n),e(t).find(".button").blur(),e(".qtranxs-lang-switch-wrap").removeClass("copying"),e(".qtranxs-lang-copy .button").removeClass("active")):a.switchActiveLanguage(n):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){e(".qtranxs-lang-switch-wrap").toggleClass("copying"),e(".qtranxs-lang-copy .button").toggleClass("active"),e(".qtranxs-lang-switch-wrap").hasClass("copying")?e(".qtranxs-lang-switch").each((function(){e(this).attr("orig-title",e(this).attr("title")),e(this).attr("lang")===c.activeLanguage?e(this).attr("title",c.strings.CopyFromAlt):e(this).attr("title",c.strings.CopyFrom+" [:"+e(this).attr("lang")+"]")})):e(".qtranxs-lang-switch").each((function(){e(this).attr("title",e(this).attr("orig-title"))}))},this.copyContentFrom=function(e){var t=c.activeLanguage,n=!1;for(var i in d){var o=d[i],s=o.mce&&!o.mce.hidden,r=s?o.mce.getContent({format:"html"}):o.contentField.value;r||(r=o.fields[e].value)&&(o.contentField.value=r,s&&y(o),n=!0)}n&&a.onLoadLanguage(t,e)},this.createSetOfLSBwith=function(t){var i=n("ul",{className:"qtranxs-lang-switch-wrap "+t}),o=c.language_config;for(var s in c.tabSwitches||(c.tabSwitches={}),o){var r=o[s],l=c.flag_location,d=c.strings.ShowIn+r.admin_name+" [:"+s+"]",u=n("li",{lang:s,className:"qtranxs-lang-switch qtranxs-lang-switch-"+s,title:d,onclick:a.clickSwitchLanguage},i),g=u;"button"===c.lsb_style_subitem&&(g=n("button",{className:"button button-secondary",type:"button"},u)),n("img",{src:l+r.flag},g),n("span",{innerHTML:r.name},g),c.activeLanguage===s&&(u.classList.add(c.lsb_style_active_class),e(u).find(".button").addClass("active")),c.tabSwitches[s]||(c.tabSwitches[s]=[]),c.tabSwitches[s].push(u)}if(!c.hide_lsb_copy_content){var f=n("li",{className:"qtranxs-lang-copy"},i),h=n("button",{className:"button button-secondary",type:"button",title:c.strings.CopyFromAlt,onclick:a.toggleCopyFrom},f);n("span",{innerHTML:c.strings.CopyFrom},h)}return i},this.createSetOfLSB=function(){return a.createSetOfLSBwith(c.lsb_style_wrap_class+" widefat")},c.LSB){this.addContentHooksTinyMCE(),function(){var t=document.getElementById("qtranxs-meta-box-lsb");if(t){var n=t.getElementsByClassName("inside");if(n.length){t.className+=" closed",e(t).find(".hndle").remove();var i=document.createElement("span");t.insertBefore(i,n[0]),i.className="hndle ui-sortable-handle";var o=a.createSetOfLSBwith(c.lsb_style_wrap_class);i.appendChild(o),e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")}}}();var k=[];if(c.page_config&&c.page_config.anchors)for(var S in c.page_config.anchors){var x=c.page_config.anchors[S];if(H=document.getElementById(S))k.push({f:H,where:x.where});else if(x.jquery)for(var _=e(x.jquery),B=0;B<_.length;++B){var H=_[B];k.push({f:H,where:x.where})}}for(k.length||((H=t.langSwitchWrapAnchor)||(H=b()),H&&k.push({f:H,where:"before"})),B=0;B<k.length;++B){if(!(x=k[B]).where||x.where.indexOf("before")>=0){var E=a.createSetOfLSB();x.f.parentNode.insertBefore(E,x.f)}x.where&&x.where.indexOf("after")>=0&&(E=a.createSetOfLSB(),x.f.parentNode.insertBefore(E,x.f.nextSibling)),x.where&&x.where.indexOf("first")>=0&&(E=a.createSetOfLSB(),x.f.insertBefore(E,x.f.firstChild)),x.where&&x.where.indexOf("last")>=0&&(E=a.createSetOfLSB(),x.f.insertBefore(E,null))}this.addLanguageSwitchListener((function(e){l(e);for(var t=h.length;--t>=0;)(a=h[t]).nd.parentNode?a.nd.nodeValue=a.contents[e]:h.splice(t,1);for(t=m.length;--t>=0;)(a=m[t]).nd.parentNode?a.nd.setAttribute(a.attr,a.contents[e]):m.splice(t,1);if(!c.RAW)for(var n in d){var a,o=(a=d[n]).mce&&!a.mce.hidden;o&&a.mce.save({format:"html"});var r=a.contentField.value.trim(),u=i(r);if(!u||u.length<=1){a.fields[a.lang].value=r,a.lang=e;var g=a.fields[a.lang].value;a.contentField.placeholder&&""!==g&&(a.contentField.placeholder=""),a.contentField.value=g,o&&y(a)}else{var f=s(u);for(var v in a.fields)a.fields[v].value=f[v];a.lang=e}}})),t.onTabSwitch&&this.addLanguageSwitchListener(t.onTabSwitch)}},c.js.get_qtx=function(){return c.qtx||(c.qtx=new t(c.js)),c.qtx},e(window).on("load",(function(){c.js.get_qtx().loadAdditionalTinyMceHooks()}))})();