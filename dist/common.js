(()=>{var e,t,n,a,i=window.qTranslateConfig;function o(e,t,n,a){var i=document.createElement(e);if(t)for(var o in t)i[o]=t[o];return n&&(a&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}qtranxj_get_split_blocks=function(e){var t="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,i.lang_code_format),n=new RegExp(t,"gi");if(3==="a~b".split(/(~)/).length)return e.split(n);for(var a,o=0,s=[];null!=(a=n.exec(e));)s.push(e.slice(o,a.index)),a.length>1&&s.push(a[1]),o=n.lastIndex;return o<e.length&&s.push(e.slice(o)),o===e.length&&s.push(""),s},qtranxj_split=function(e){var t=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(t)},qtranxj_split_blocks=function(e){var t=new Object;for(var n in i.language_config)t[n]="";if(!e||!e.length)return t;if(1===e.length){var a=e[0];for(var n in i.language_config)t[n]+=a;return t}for(var o,s=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,i.lang_code_format),"gi"),r=new RegExp("\\[:(lang)]".replace(/lang/g,i.lang_code_format),"gi"),l=new RegExp("{:(lang)}".replace(/lang/g,i.lang_code_format),"gi"),c=(n=!1,0);c<e.length;++c)if((a=e[c]).length)if(o=s.exec(a),s.lastIndex=0,null==o)if(o=r.exec(a),r.lastIndex=0,null==o)if(o=l.exec(a),l.lastIndex=0,null==o)if("\x3c!--:--\x3e"!==a&&"[:]"!==a&&"{:}"!==a)if(n)t[n]?t[n]+=a:t[n]=a,n=!1;else for(var d in t)t[d]+=a;else n=!1;else n=o[1];else n=o[1];else n=o[1];return t},e=jQuery,t="qtranslate-xt-admin-edit-language",n=function(e){try{sessionStorage.setItem(t,e)}catch(e){console.log('Failed to store "'+t+'" with sessionStorage',e)}},a=function(a){var s=this;this.getLanguages=function(){return i.language_config},this.getFlagLocation=function(){return i.flag_location},this.isLanguageEnabled=function(e){return!!i.language_config[e]},i.LSB?(i.activeLanguage=sessionStorage.getItem(t),i.activeLanguage&&this.isLanguageEnabled(i.activeLanguage)||(i.activeLanguage=i.language,this.isLanguageEnabled(i.activeLanguage)?n(i.activeLanguage):i.LSB=!1)):(i.activeLanguage=i.language,n(i.activeLanguage)),this.getActiveLanguage=function(){return i.activeLanguage};var r={};this.hasContentHook=function(e){return r[e]},this.addContentHook=function(t,n,a){if(!t)return!1;switch(t.tagName){case"TEXTAREA":break;case"INPUT":switch(t.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!a){if(!t.name)return!1;a=t.name}if(t.id){if(r[t.id]){if(e.contains(document,t))return r[t.id];s.removeContentHook(t)}}else if(r[a]){var l=0;do{++l,t.id=a+l}while(r[t.id])}else t.id=a;t.className+=" qtranxs-translatable";var c,d=r[t.id]={};if(d.name=a,d.contentField=t,d.lang=i.activeLanguage,n)switch(n){case"slug":c="qtranslate-slugs[";break;case"term":c="qtranslate-terms[";break;default:c="qtranslate-fields["}else n="[",c="qtranslate-fields[";d.encode=n;var u,g,f,h=d.name.indexOf("[");if(h<0)u=c+d.name+"]";else if(u=c+d.name.substring(0,h)+"]",d.name.lastIndexOf("[]")<0)u+=d.name.substring(h);else{var v=d.name.length-2;v>h&&(u+=d.name.substring(h,v)),g="[]"}if(d.fields={},!i.RAW){for(var m in f=qtranxj_split(t.value),t.value=f[d.lang],f){var p=u+"["+m+"]";g&&(p+=g);var y=o("input",{name:p,type:"hidden",className:"hidden",value:f[m]});d.fields[m]=y,t.parentNode.insertBefore(y,t)}$form=e(t).closest("form"),$form.length?$form.find('input[name="qtranslate-edit-language"]').length||o("input",{type:"hidden",name:"qtranslate-edit-language",value:i.activeLanguage},$form[0],!0):console.error("No form found for translatable field id=",t.id)}switch(n){case"slug":case"term":i.RAW&&(f=qtranxj_split(t.value)),d.sepfield=o("input",{name:u+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:f[i.default_language]});break;default:i.RAW||(d.sepfield=o("input",{name:u+"[qtranslate-separator]",type:"hidden",className:"hidden",value:n}))}return d.sepfield&&t.parentNode.insertBefore(d.sepfield,t),d},this.addContentHookC=function(e){return s.addContentHook(e,"[")},this.addContentHookB=function(e){return s.addContentHook(e,"[")},this.addContentHookById=function(e,t,n){return s.addContentHook(document.getElementById(e),t,n)},this.addContentHookByIdName=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return s.addContentHookById(e,t)},this.addContentHookByIdC=function(e){return s.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return s.addContentHookById(e,"[")},this.addContentHooks=function(e,t,n){for(var a=0;a<e.length;++a){var i=e[a];s.addContentHook(i,t,n)}},this.addContentHooksByClass=function(e,t){var n;0!==e.indexOf("<")&&0!==e.indexOf("[")||(n=e.substring(0,1),e=e.substring(1)),function(e,t,n){t||(t=document);var a=t.getElementsByClassName(e);s.addContentHooks(a,n)}(e,t,n)},this.addContentHooksByTagInClass=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(t);s.addContentHooks(o)}};var l=function(t){if(!t)return!1;t.sepfield&&e(t.sepfield).remove();var n={};for(var a in t.fields){var i=t.fields[a];n[a]=i.value,e(i).remove()}return e(t.contentField).removeClass("qtranxs-translatable"),delete r[t.contentField.id],n};this.removeContentHook=function(t){if(!t||!t.id||!r[t.id])return!1;var n=r[t.id];return l(n),e(t).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e||!e.id)return!1;var t=r[e.id];return t&&l(t),s.addContentHook(e)};var c=function(e){if(e[i.language])return"("+i.language+") "+e[i.language];if(e[i.default_language])return"("+i.default_language+") "+e[i.default_language];for(var t in e)if(e[t])return"("+t+") "+e[t];return""},d=function(e){var t=null;for(var n in e)e[n]||(t||(t=c(e)),e[n]=t)},u=[],g=function(e){if(!e.nodeValue)return 0;var t=qtranxj_get_split_blocks(e.nodeValue);if(!t||!t.length||1===t.length)return 0;var n={};return n.nd=e,n.contents=qtranxj_split_blocks(t),d(n.contents),e.nodeValue=n.contents[i.activeLanguage],u.push(n),1},f=[],h=function(e,t){if(!e.hasAttribute(t))return 0;var n=e.getAttribute(t),a=qtranxj_get_split_blocks(n);if(!a||!a.length||1===a.length)return 0;var o={};return o.nd=e,o.attr=t,o.contents=qtranxj_split_blocks(a),d(o.contents),e.setAttribute(t,o.contents[i.activeLanguage]),f.push(o),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?h(e,"value"):0}var t=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var a=e.childNodes[n];switch(a.nodeType){case 1:t+=s.addDisplayHook(a);break;case 2:case 3:t+=g(a)}}return t},this.addDisplayHookById=function(e){return s.addDisplayHook(document.getElementById(e))};var v=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})};this.addDisplayHooks=function(e){for(var t=0;t<e.length;++t){var n=e[t];s.addDisplayHook(n)}},this.addDisplayHookAttrs=function(e,t){for(var n=0;n<t.length;++n){var a=t[n];h(e,a)}},this.addDisplayHooksAttrs=function(e,t){for(var n=0;n<e.length;++n){var a=e[n];s.addDisplayHookAttrs(a,t)}},this.addDisplayHooksByClass=function(e,t){var n=t.getElementsByClassName(e);s.addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(t);s.addDisplayHooks(o)}},this.addCustomContentHooks=function(){for(var e=0;e<i.custom_fields.length;++e){var t=i.custom_fields[e];s.addContentHookByIdName(t)}for(e=0;e<i.custom_field_classes.length;++e){var n=i.custom_field_classes[e];s.addContentHooksByClass(n)}i.LSB&&s.addContentHooksTinyMCE()};var m=function(e){var t=e.id;if(t){var n=r[t];if(n&&!n.mce){n.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var a=n.updateTinyMCEonInit;return null==a&&(a=e.getContent({format:"html"}).replace(/\s+/g,"")!==n.contentField.value.replace(/\s+/g,"")),a&&v(n),n}}};this.addContentHooksTinyMCE=function(){if(window.tinyMCEPreInit&&window.tinyMCE)for(var e in r){var t=r[e];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[e]){if(t.mceInit=tinyMCEPreInit.mceInit[e],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var n=tinymce.DOM.select("#wp-"+e+"-wrap");n&&n.length&&(t.wrapper=n[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){m(e)}}}},this.loadAdditionalTinyMceHooks=function(){window.tinyMCE&&tinyMCE.get().forEach((function(e){m(e)}))},i.onTabSwitchFunctions||(i.onTabSwitchFunctions=[]),i.onTabSwitchFunctionsSave||(i.onTabSwitchFunctionsSave=[]),i.onTabSwitchFunctionsLoad||(i.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){i.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){i.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var t=0;t<i.onTabSwitchFunctionsSave.length;++t)if(i.onTabSwitchFunctionsSave[t]===e)return void i.onTabSwitchFunctionsSave.splice(t,1)},this.addLanguageSwitchAfterListener=function(e){i.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var t=0;t<i.onTabSwitchFunctionsLoad.length;++t)if(i.onTabSwitchFunctionsLoad[t]===e)return void i.onTabSwitchFunctionsLoad.splice(t,1)},this.enableLanguageSwitchingButtons=function(e){var t=e?"block":"none";for(var n in i.tabSwitches){for(var a=i.tabSwitches[n],o=0;o<a.length;++o){a[o].parentElement.style.display=t;break}break}};var p=function(){for(var e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t)if((n=e[t].getElementsByTagName("form")).length)return n[0];var n;if(1===(n=document.getElementsByTagName("form")).length)return n[0];for(t=0;t<n.length;++t){var a=n[t];if((e=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof a.addContentHooks&&a.addContentHooks(this),i.page_config&&i.page_config.forms&&function(t){for(var n in t){var a,i=t[n];if(i.form){if(i.form.id)a=document.getElementById(i.form.id);else if(i.form.jquery)a=e(i.form.jquery);else if(i.form.name){var o=document.getElementsByName(i.form.name);o&&o.length&&(a=o[0])}}else a=document.getElementById(n);for(var r in a||(a=p())||(a=document),i.fields){var l=i.fields[r],c=[];l.container_id?(g=document.getElementById(l.container_id))&&c.push(g):l.container_jquery?c=e(l.container_jquery):l.container_class?c=document.getElementsByClassName(l.container_class):c.push(a);var d=l.encode;switch(d){case"none":continue;case"display":if(l.jquery)for(var u=0;u<c.length;++u){var g=c[u],f=e(g).find(l.jquery);l.attrs?s.addDisplayHooksAttrs(f,l.attrs):s.addDisplayHooks(f)}else{var h=l.id?l.id:r,v=document.getElementById(h);l.attrs?s.addDisplayHookAttrs(v,l.attrs):s.addDisplayHook(v)}break;case"[":case"<":case"{":case"byline":default:if(l.jquery)for(u=0;u<c.length;++u)g=c[u],f=e(g).find(l.jquery),s.addContentHooks(f,d,l.name);else h=l.id?l.id:r,s.addContentHookById(h,d,l.name)}}}}(i.page_config.forms),e(".i18n-multilingual").each((function(e,t){s.addContentHook(t,"[")})),e(".i18n-multilingual-curly").each((function(e,t){s.addContentHook(t,"{")})),e(".i18n-multilingual-term").each((function(e,t){s.addContentHook(t,"term")})),e(".i18n-multilingual-slug").each((function(e,t){s.addContentHook(t,"slug")})),e(".i18n-multilingual-display").each((function(e,t){s.addDisplayHook(t)})),!u.length&&!f.length){var y=!1;for(var w in r){y=!0;break}if(!y)return}if(this.onLoadLanguage=function(e,t){for(var n=i.onTabSwitchFunctionsLoad,a=0;a<n.length;++a)n[a].call(i.qtx,e,t)},this.switchActiveLanguage=function(t){if(i.activeLanguage!==t){if(i.activeLanguage){for(var n=!0,a=i.onTabSwitchFunctionsSave,o=0;o<a.length;++o)!1===a[o].call(i.qtx,i.activeLanguage,t)&&(n=!1);if(!n)return;var r=i.tabSwitches[i.activeLanguage];for(o=0;o<r.length;++o)r[o].classList.remove(i.lsb_style_active_class),e(r[o]).find(".button").removeClass("active")}var l=i.activeLanguage;for(i.activeLanguage=t,e('input[name="qtranslate-edit-language"]').val(t),r=i.tabSwitches[i.activeLanguage],o=0;o<r.length;++o)r[o].classList.add(i.lsb_style_active_class),e(r[o]).find(".button").addClass("active");var c=i.onTabSwitchFunctions;for(o=0;o<c.length;++o)c[o].call(i.qtx,t,l);s.onLoadLanguage(t,l)}},this.clickSwitchLanguage=function(){var t=e(this).hasClass("button")?this.parentNode:this,n=t.lang;n?e(".qtranxs-lang-switch-wrap").hasClass("copying")?(s.copyContentFrom(n),e(t).find(".button").blur(),e(".qtranxs-lang-switch-wrap").removeClass("copying"),e(".qtranxs-lang-copy .button").removeClass("active")):s.switchActiveLanguage(n):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){e(".qtranxs-lang-switch-wrap").toggleClass("copying"),e(".qtranxs-lang-copy .button").toggleClass("active"),e(".qtranxs-lang-switch-wrap").hasClass("copying")?e(".qtranxs-lang-switch").each((function(){e(this).attr("orig-title",e(this).attr("title")),e(this).attr("lang")===i.activeLanguage?e(this).attr("title",i.strings.CopyFromAlt):e(this).attr("title",i.strings.CopyFrom+" [:"+e(this).attr("lang")+"]")})):e(".qtranxs-lang-switch").each((function(){e(this).attr("title",e(this).attr("orig-title"))}))},this.copyContentFrom=function(e){var t=i.activeLanguage,n=!1;for(var a in r){var o=r[a],l=o.mce&&!o.mce.hidden,c=l?o.mce.getContent({format:"html"}):o.contentField.value;c||(c=o.fields[e].value)&&(o.contentField.value=c,l&&v(o),n=!0)}n&&s.onLoadLanguage(t,e)},this.createSetOfLSBwith=function(t){var n=o("ul",{className:"qtranxs-lang-switch-wrap "+t}),a=i.language_config;for(var r in i.tabSwitches||(i.tabSwitches={}),a){var l=a[r],c=i.flag_location,d=o("li",{lang:r,className:"qtranxs-lang-switch qtranxs-lang-switch-"+r,title:i.strings.ShowIn+l.admin_name+" [:"+r+"]",onclick:s.clickSwitchLanguage},n),u=d;"button"===i.lsb_style_subitem&&(u=o("button",{className:"button button-secondary",type:"button"},d)),o("img",{src:c+l.flag},u),o("span",{innerHTML:l.name},u),i.activeLanguage===r&&(d.classList.add(i.lsb_style_active_class),e(d).find(".button").addClass("active")),i.tabSwitches[r]||(i.tabSwitches[r]=[]),i.tabSwitches[r].push(d)}if(!i.hide_lsb_copy_content){var g=o("li",{className:"qtranxs-lang-copy"},n),f=o("button",{className:"button button-secondary",type:"button",title:i.strings.CopyFromAlt,onclick:s.toggleCopyFrom},g);o("span",{innerHTML:i.strings.CopyFrom},f)}return n},this.createSetOfLSB=function(){return s.createSetOfLSBwith(i.lsb_style_wrap_class+" widefat")},i.LSB){this.addContentHooksTinyMCE(),function(){var t=document.getElementById("qtranxs-meta-box-lsb");if(t){var n=t.getElementsByClassName("inside");if(n.length){t.className+=" closed",e(t).find(".hndle").remove();var a=document.createElement("span");t.insertBefore(a,n[0]),a.className="hndle ui-sortable-handle";var o=s.createSetOfLSBwith(i.lsb_style_wrap_class);a.appendChild(o),e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")}}}();var b=[];if(i.page_config&&i.page_config.anchors)for(var C in i.page_config.anchors){var _=i.page_config.anchors[C];if(L=document.getElementById(C))b.push({f:L,where:_.where});else if(_.jquery)for(var k=e(_.jquery),x=0;x<k.length;++x){var L=k[x];b.push({f:L,where:_.where})}}for(b.length||((L=a.langSwitchWrapAnchor)||(L=p()),L&&b.push({f:L,where:"before"})),x=0;x<b.length;++x){if(!(_=b[x]).where||_.where.indexOf("before")>=0){var S=s.createSetOfLSB();_.f.parentNode.insertBefore(S,_.f)}_.where&&_.where.indexOf("after")>=0&&(S=s.createSetOfLSB(),_.f.parentNode.insertBefore(S,_.f.nextSibling)),_.where&&_.where.indexOf("first")>=0&&(S=s.createSetOfLSB(),_.f.insertBefore(S,_.f.firstChild)),_.where&&_.where.indexOf("last")>=0&&(S=s.createSetOfLSB(),_.f.insertBefore(S,null))}this.addLanguageSwitchListener((function(e){n(e);for(var t=u.length;--t>=0;)(o=u[t]).nd.parentNode?o.nd.nodeValue=o.contents[e]:u.splice(t,1);for(t=f.length;--t>=0;)(o=f[t]).nd.parentNode?o.nd.setAttribute(o.attr,o.contents[e]):f.splice(t,1);if(!i.RAW)for(var a in r){var o,s=(o=r[a]).mce&&!o.mce.hidden;s&&o.mce.save({format:"html"});var l=o.contentField.value.trim(),c=qtranxj_get_split_blocks(l);if(!c||c.length<=1){o.fields[o.lang].value=l,o.lang=e;var d=o.fields[o.lang].value;o.contentField.placeholder&&""!==d&&(o.contentField.placeholder=""),o.contentField.value=d,s&&v(o)}else{var g=qtranxj_split_blocks(c);for(var h in o.fields)o.fields[h].value=g[h];o.lang=e}}})),a.onTabSwitch&&this.addLanguageSwitchListener(a.onTabSwitch)}},i.js.get_qtx=function(){return i.qtx||(i.qtx=new a(i.js)),i.qtx},e(window).on("load",(function(){i.js.get_qtx().loadAdditionalTinyMceHooks()}))})();