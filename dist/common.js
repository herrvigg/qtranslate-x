(()=>{"use strict";var e,t,n,a,i=window.qTranslateConfig,o=function(e){var t="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,i.lang_code_format),n=new RegExp(t,"gi");if(3==="a~b".split(/(~)/).length)return e.split(n);for(var a,o=0,s=[];null!=(a=n.exec(e));)s.push(e.slice(o,a.index)),a.length>1&&s.push(a[1]),o=n.lastIndex;return o<e.length&&s.push(e.slice(o)),o===e.length&&s.push(""),s},s=function(e){var t=o(e);return r(t)},r=function(e){var t=new Object;for(var n in i.language_config)t[n]="";if(!e||!e.length)return t;if(1===e.length){var a=e[0];for(var n in i.language_config)t[n]+=a;return t}for(var o,s=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,i.lang_code_format),"gi"),r=new RegExp("\\[:(lang)]".replace(/lang/g,i.lang_code_format),"gi"),l=new RegExp("{:(lang)}".replace(/lang/g,i.lang_code_format),"gi"),c=(n=!1,0);c<e.length;++c)if((a=e[c]).length)if(o=s.exec(a),s.lastIndex=0,null==o)if(o=r.exec(a),r.lastIndex=0,null==o)if(o=l.exec(a),l.lastIndex=0,null==o)if("\x3c!--:--\x3e"!==a&&"[:]"!==a&&"{:}"!==a)if(n)t[n]?t[n]+=a:t[n]=a,n=!1;else for(var d in t)t[d]+=a;else n=!1;else n=o[1];else n=o[1];else n=o[1];return t},l=function(e,t,n,a){var i=document.createElement(e);if(t)for(var o in t)i[o]=t[o];return n&&(a&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i};e=jQuery,t="qtranslate-xt-admin-edit-language",n=function(e){try{sessionStorage.setItem(t,e)}catch(e){console.log('Failed to store "'+t+'" with sessionStorage',e)}},a=function(a){var c=this;this.getLanguages=function(){return i.language_config},this.getFlagLocation=function(){return i.flag_location},this.isLanguageEnabled=function(e){return!!i.language_config[e]},i.LSB?(i.activeLanguage=sessionStorage.getItem(t),i.activeLanguage&&this.isLanguageEnabled(i.activeLanguage)||(i.activeLanguage=i.language,this.isLanguageEnabled(i.activeLanguage)?n(i.activeLanguage):i.LSB=!1)):(i.activeLanguage=i.language,n(i.activeLanguage)),this.getActiveLanguage=function(){return i.activeLanguage};var d={};this.hasContentHook=function(e){return d[e]},this.addContentHook=function(t,n,a){if(!t)return!1;switch(t.tagName){case"TEXTAREA":break;case"INPUT":switch(t.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!a){if(!t.name)return!1;a=t.name}if(t.id){if(d[t.id]){if(e.contains(document,t))return d[t.id];c.removeContentHook(t)}}else if(d[a]){var o=0;do{++o,t.id=a+o}while(d[t.id])}else t.id=a;t.className+=" qtranxs-translatable";var r,u=d[t.id]={};if(u.name=a,u.contentField=t,u.lang=i.activeLanguage,n)switch(n){case"slug":r="qtranslate-slugs[";break;case"term":r="qtranslate-terms[";break;default:r="qtranslate-fields["}else n="[",r="qtranslate-fields[";u.encode=n;var g,f,h,v=u.name.indexOf("[");if(v<0)g=r+u.name+"]";else if(g=r+u.name.substring(0,v)+"]",u.name.lastIndexOf("[]")<0)g+=u.name.substring(v);else{var m=u.name.length-2;m>v&&(g+=u.name.substring(v,m)),f="[]"}if(u.fields={},!i.RAW){for(var p in h=s(t.value),t.value=h[u.lang],h){var y=h[p],w=g+"["+p+"]";f&&(w+=f);var b=l("input",{name:w,type:"hidden",className:"hidden",value:y});u.fields[p]=b,t.parentNode.insertBefore(b,t)}var C=e(t).closest("form");C.length?C.find('input[name="qtranslate-edit-language"]').length||l("input",{type:"hidden",name:"qtranslate-edit-language",value:i.activeLanguage},C[0],!0):console.error("No form found for translatable field id=",t.id)}switch(n){case"slug":case"term":i.RAW&&(h=s(t.value)),u.sepfield=l("input",{name:g+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:h[i.default_language]});break;default:i.RAW||(u.sepfield=l("input",{name:g+"[qtranslate-separator]",type:"hidden",className:"hidden",value:n}))}return u.sepfield&&t.parentNode.insertBefore(u.sepfield,t),u},this.addContentHookC=function(e){return c.addContentHook(e,"[")},this.addContentHookB=function(e){return c.addContentHook(e,"[")},this.addContentHookById=function(e,t,n){return c.addContentHook(document.getElementById(e),t,n)},this.addContentHookByIdName=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return c.addContentHookById(e,t)},this.addContentHookByIdC=function(e){return c.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return c.addContentHookById(e,"[")},this.addContentHooks=function(e,t,n){for(var a=0;a<e.length;++a){var i=e[a];c.addContentHook(i,t,n)}},this.addContentHooksByClass=function(e,t){var n;0!==e.indexOf("<")&&0!==e.indexOf("[")||(n=e.substring(0,1),e=e.substring(1)),function(e,t,n){t||(t=document);var a=t.getElementsByClassName(e);c.addContentHooks(a,n)}(e,t,n)},this.addContentHooksByTagInClass=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(t);c.addContentHooks(o)}};var u=function(t){if(!t)return!1;t.sepfield&&e(t.sepfield).remove();var n={};for(var a in t.fields){var i=t.fields[a];n[a]=i.value,e(i).remove()}return e(t.contentField).removeClass("qtranxs-translatable"),delete d[t.contentField.id],n};this.removeContentHook=function(t){if(!t||!t.id||!d[t.id])return!1;var n=d[t.id];return u(n),e(t).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e||!e.id)return!1;var t=d[e.id];return t&&u(t),c.addContentHook(e)};var g=function(e){if(e[i.language])return"("+i.language+") "+e[i.language];if(e[i.default_language])return"("+i.default_language+") "+e[i.default_language];for(var t in e)if(e[t])return"("+t+") "+e[t];return""},f=function(e){var t=null;for(var n in e)e[n]||(t||(t=g(e)),e[n]=t)},h=[],v=function(e){if(!e.nodeValue)return 0;var t=o(e.nodeValue);if(!t||!t.length||1===t.length)return 0;var n={};return n.nd=e,n.contents=r(t),f(n.contents),e.nodeValue=n.contents[i.activeLanguage],h.push(n),1},m=[],p=function(e,t){if(!e.hasAttribute(t))return 0;var n=e.getAttribute(t),a=o(n);if(!a||!a.length||1===a.length)return 0;var s={};return s.nd=e,s.attr=t,s.contents=r(a),f(s.contents),e.setAttribute(t,s.contents[i.activeLanguage]),m.push(s),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?p(e,"value"):0}var t=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var a=e.childNodes[n];switch(a.nodeType){case 1:t+=c.addDisplayHook(a);break;case 2:case 3:t+=v(a)}}return t},this.addDisplayHookById=function(e){return c.addDisplayHook(document.getElementById(e))};var y=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})};this.addDisplayHooks=function(e){for(var t=0;t<e.length;++t){var n=e[t];c.addDisplayHook(n)}},this.addDisplayHookAttrs=function(e,t){for(var n=0;n<t.length;++n){var a=t[n];p(e,a)}},this.addDisplayHooksAttrs=function(e,t){for(var n=0;n<e.length;++n){var a=e[n];c.addDisplayHookAttrs(a,t)}},this.addDisplayHooksByClass=function(e,t){var n=t.getElementsByClassName(e);c.addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(t);c.addDisplayHooks(o)}},this.addCustomContentHooks=function(){for(var e=0;e<i.custom_fields.length;++e){var t=i.custom_fields[e];c.addContentHookByIdName(t)}for(e=0;e<i.custom_field_classes.length;++e){var n=i.custom_field_classes[e];c.addContentHooksByClass(n)}i.LSB&&c.addContentHooksTinyMCE()};var w=function(e){var t=e.id;if(t){var n=d[t];if(n&&!n.mce){n.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var a=n.updateTinyMCEonInit;return null==a&&(a=e.getContent({format:"html"}).replace(/\s+/g,"")!==n.contentField.value.replace(/\s+/g,"")),a&&y(n),n}}};this.addContentHooksTinyMCE=function(){if(window.tinyMCEPreInit&&window.tinyMCE)for(var e in d){var t=d[e];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[e]){if(t.mceInit=tinyMCEPreInit.mceInit[e],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var n=tinymce.DOM.select("#wp-"+e+"-wrap");n&&n.length&&(t.wrapper=n[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){w(e)}}}},this.loadAdditionalTinyMceHooks=function(){window.tinyMCE&&tinyMCE.get().forEach((function(e){w(e)}))},i.onTabSwitchFunctions||(i.onTabSwitchFunctions=[]),i.onTabSwitchFunctionsSave||(i.onTabSwitchFunctionsSave=[]),i.onTabSwitchFunctionsLoad||(i.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){i.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){i.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var t=0;t<i.onTabSwitchFunctionsSave.length;++t)if(i.onTabSwitchFunctionsSave[t]===e)return void i.onTabSwitchFunctionsSave.splice(t,1)},this.addLanguageSwitchAfterListener=function(e){i.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var t=0;t<i.onTabSwitchFunctionsLoad.length;++t)if(i.onTabSwitchFunctionsLoad[t]===e)return void i.onTabSwitchFunctionsLoad.splice(t,1)},this.enableLanguageSwitchingButtons=function(e){var t=e?"block":"none";for(var n in i.tabSwitches){for(var a=i.tabSwitches[n],o=0;o<a.length;++o){a[o].parentElement.style.display=t;break}break}};var b=function(){for(var e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t)if((n=e[t].getElementsByTagName("form")).length)return n[0];var n;if(1===(n=document.getElementsByTagName("form")).length)return n[0];for(t=0;t<n.length;++t){var a=n[t];if((e=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof a.addContentHooks&&a.addContentHooks(this),i.page_config&&i.page_config.forms&&function(t){for(var n in t){var a,i=t[n];if(i.form){if(i.form.id)a=document.getElementById(i.form.id);else if(i.form.jquery)a=e(i.form.jquery);else if(i.form.name){var o=document.getElementsByName(i.form.name);o&&o.length&&(a=o[0])}}else a=document.getElementById(n);for(var s in a||(a=b())||(a=document),i.fields){var r=i.fields[s],l=[];r.container_id?(g=document.getElementById(r.container_id))&&l.push(g):r.container_jquery?l=e(r.container_jquery):r.container_class?l=document.getElementsByClassName(r.container_class):l.push(a);var d=r.encode;switch(d){case"none":continue;case"display":if(r.jquery)for(var u=0;u<l.length;++u){var g=l[u],f=e(g).find(r.jquery);r.attrs?c.addDisplayHooksAttrs(f,r.attrs):c.addDisplayHooks(f)}else{var h=r.id?r.id:s,v=document.getElementById(h);r.attrs?c.addDisplayHookAttrs(v,r.attrs):c.addDisplayHook(v)}break;case"[":case"<":case"{":case"byline":default:if(r.jquery)for(u=0;u<l.length;++u)g=l[u],f=e(g).find(r.jquery),c.addContentHooks(f,d,r.name);else h=r.id?r.id:s,c.addContentHookById(h,d,r.name)}}}}(i.page_config.forms),e(".i18n-multilingual").each((function(e,t){c.addContentHook(t,"[")})),e(".i18n-multilingual-curly").each((function(e,t){c.addContentHook(t,"{")})),e(".i18n-multilingual-term").each((function(e,t){c.addContentHook(t,"term")})),e(".i18n-multilingual-slug").each((function(e,t){c.addContentHook(t,"slug")})),e(".i18n-multilingual-display").each((function(e,t){c.addDisplayHook(t)})),!h.length&&!m.length){var C=!1;for(var L in d){C=!0;break}if(!C)return}if(this.onLoadLanguage=function(e,t){for(var n=i.onTabSwitchFunctionsLoad,a=0;a<n.length;++a)n[a].call(i.qtx,e,t)},this.switchActiveLanguage=function(t){if(i.activeLanguage!==t){if(i.activeLanguage){for(var n=!0,a=i.onTabSwitchFunctionsSave,o=0;o<a.length;++o)!1===a[o].call(i.qtx,i.activeLanguage,t)&&(n=!1);if(!n)return;var s=i.tabSwitches[i.activeLanguage];for(o=0;o<s.length;++o)s[o].classList.remove(i.lsb_style_active_class),e(s[o]).find(".button").removeClass("active")}var r=i.activeLanguage;for(i.activeLanguage=t,e('input[name="qtranslate-edit-language"]').val(t),s=i.tabSwitches[i.activeLanguage],o=0;o<s.length;++o)s[o].classList.add(i.lsb_style_active_class),e(s[o]).find(".button").addClass("active");var l=i.onTabSwitchFunctions;for(o=0;o<l.length;++o)l[o].call(i.qtx,t,r);c.onLoadLanguage(t,r)}},this.clickSwitchLanguage=function(){var t=e(this).hasClass("button")?this.parentNode:this,n=t.lang;n?e(".qtranxs-lang-switch-wrap").hasClass("copying")?(c.copyContentFrom(n),e(t).find(".button").blur(),e(".qtranxs-lang-switch-wrap").removeClass("copying"),e(".qtranxs-lang-copy .button").removeClass("active")):c.switchActiveLanguage(n):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){e(".qtranxs-lang-switch-wrap").toggleClass("copying"),e(".qtranxs-lang-copy .button").toggleClass("active"),e(".qtranxs-lang-switch-wrap").hasClass("copying")?e(".qtranxs-lang-switch").each((function(){e(this).attr("orig-title",e(this).attr("title")),e(this).attr("lang")===i.activeLanguage?e(this).attr("title",i.strings.CopyFromAlt):e(this).attr("title",i.strings.CopyFrom+" [:"+e(this).attr("lang")+"]")})):e(".qtranxs-lang-switch").each((function(){e(this).attr("title",e(this).attr("orig-title"))}))},this.copyContentFrom=function(e){var t=i.activeLanguage,n=!1;for(var a in d){var o=d[a],s=o.mce&&!o.mce.hidden,r=s?o.mce.getContent({format:"html"}):o.contentField.value;r||(r=o.fields[e].value)&&(o.contentField.value=r,s&&y(o),n=!0)}n&&c.onLoadLanguage(t,e)},this.createSetOfLSBwith=function(t){var n=l("ul",{className:"qtranxs-lang-switch-wrap "+t}),a=i.language_config;for(var o in i.tabSwitches||(i.tabSwitches={}),a){var s=a[o],r=i.flag_location,d=i.strings.ShowIn+s.admin_name+" [:"+o+"]",u=l("li",{lang:o,className:"qtranxs-lang-switch qtranxs-lang-switch-"+o,title:d,onclick:c.clickSwitchLanguage},n),g=u;"button"===i.lsb_style_subitem&&(g=l("button",{className:"button button-secondary",type:"button"},u)),l("img",{src:r+s.flag},g),l("span",{innerHTML:s.name},g),i.activeLanguage===o&&(u.classList.add(i.lsb_style_active_class),e(u).find(".button").addClass("active")),i.tabSwitches[o]||(i.tabSwitches[o]=[]),i.tabSwitches[o].push(u)}if(!i.hide_lsb_copy_content){var f=l("li",{className:"qtranxs-lang-copy"},n),h=l("button",{className:"button button-secondary",type:"button",title:i.strings.CopyFromAlt,onclick:c.toggleCopyFrom},f);l("span",{innerHTML:i.strings.CopyFrom},h)}return n},this.createSetOfLSB=function(){return c.createSetOfLSBwith(i.lsb_style_wrap_class+" widefat")},i.LSB){this.addContentHooksTinyMCE(),function(){var t=document.getElementById("qtranxs-meta-box-lsb");if(t){var n=t.getElementsByClassName("inside");if(n.length){t.className+=" closed",e(t).find(".hndle").remove();var a=document.createElement("span");t.insertBefore(a,n[0]),a.className="hndle ui-sortable-handle";var o=c.createSetOfLSBwith(i.lsb_style_wrap_class);a.appendChild(o),e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")}}}();var k=[];if(i.page_config&&i.page_config.anchors)for(var S in i.page_config.anchors){var x=i.page_config.anchors[S];if(H=document.getElementById(S))k.push({f:H,where:x.where});else if(x.jquery)for(var _=e(x.jquery),B=0;B<_.length;++B){var H=_[B];k.push({f:H,where:x.where})}}for(k.length||((H=a.langSwitchWrapAnchor)||(H=b()),H&&k.push({f:H,where:"before"})),B=0;B<k.length;++B){if(!(x=k[B]).where||x.where.indexOf("before")>=0){var E=c.createSetOfLSB();x.f.parentNode.insertBefore(E,x.f)}x.where&&x.where.indexOf("after")>=0&&(E=c.createSetOfLSB(),x.f.parentNode.insertBefore(E,x.f.nextSibling)),x.where&&x.where.indexOf("first")>=0&&(E=c.createSetOfLSB(),x.f.insertBefore(E,x.f.firstChild)),x.where&&x.where.indexOf("last")>=0&&(E=c.createSetOfLSB(),x.f.insertBefore(E,null))}this.addLanguageSwitchListener((function(e){n(e);for(var t=h.length;--t>=0;)(s=h[t]).nd.parentNode?s.nd.nodeValue=s.contents[e]:h.splice(t,1);for(t=m.length;--t>=0;)(s=m[t]).nd.parentNode?s.nd.setAttribute(s.attr,s.contents[e]):m.splice(t,1);if(!i.RAW)for(var a in d){var s,l=(s=d[a]).mce&&!s.mce.hidden;l&&s.mce.save({format:"html"});var c=s.contentField.value.trim(),u=o(c);if(!u||u.length<=1){s.fields[s.lang].value=c,s.lang=e;var g=s.fields[s.lang].value;s.contentField.placeholder&&""!==g&&(s.contentField.placeholder=""),s.contentField.value=g,l&&y(s)}else{var f=r(u);for(var v in s.fields)s.fields[v].value=f[v];s.lang=e}}})),a.onTabSwitch&&this.addLanguageSwitchListener(a.onTabSwitch)}},i.js.get_qtx=function(){return i.qtx||(i.qtx=new a(i.js)),i.qtx},e(window).on("load",(function(){i.js.get_qtx().loadAdditionalTinyMceHooks()}))})();